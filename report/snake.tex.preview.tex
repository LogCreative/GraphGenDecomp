%& C:\Users\lizil\AppData\Roaming\TikzEdt\TikzEdt\023~1.0\TEMP_H~1
\begin{document}
\begin{tikzpicture}
\tikzset{
 every pin/.style={yshift=-10},
 small dot/.style={fill=black,circle,scale=0.3},
}
\draw  (-5,5) rectangle (-1,1);
\node[small dot,pin=1,opacity=0.5] at (-4,4) {};
\node[small dot,pin=2] (v3) at (-3,4) {};
\node[small dot,pin=3,opacity=0.5] at (-2,4) {};
\node[small dot,pin=4] (v1) at (-2,3) {};
\node[small dot,pin=5,opacity=0.5] (v5) at (-2,2) {};
\node[small dot,pin=6,opacity=0.5] (v8) at (-3,2) {};
\node[small dot,pin=7,opacity=0.5] (v7) at (-4,2) {};
\node[small dot,pin=8,opacity=0.5] (v4) at (-4,3) {};
\node[small dot,pin=9] (v6) at (-3,3) {};
\draw  (-1,5) rectangle (3,1);
\draw  (-1,1) rectangle (3,-3);
\draw  (-5,1) rectangle (-1,-3);
\node[small dot,pin=10] (v2) at (1,3) {};
\draw[red]  (v1) edge (v2);
\draw[opacity=0.5,red]  (v3) edge (v2);
\draw  (v3) edge (v4);
\draw  (v5) edge (v6);
\draw  (v6) edge (v4);
\draw  (v6) edge (v7);
\draw  (v8) edge (v6);

\usetikzlibrary{calc}
\pgftransformreset
\node[inner sep=0pt,outer sep=0pt,minimum size=0pt,line width=0pt,text width=0pt,text height=0pt] at (current bounding box) {};
%add border to avoid cropping by pdflibnet
\foreach \border in {0.1}
  \useasboundingbox (current bounding box.south west)+(-\border,-\border) rectangle (current bounding box.north east)+(\border,\border);
\newwrite\metadatafile
\immediate\openout\metadatafile=\jobname_BB.txt
\path
  let
    \p1=(current bounding box.south west),
    \p2=(current bounding box.north east)
  in
  node[inner sep=0pt,outer sep=0pt,minimum size=0pt,line width=0pt,text width=0pt,text height=0pt,draw=white] at (current bounding box) {
\immediate\write\metadatafile{\p1,\p2}
};
\immediate\closeout\metadatafile
\end{tikzpicture}

\end{document}

document}
